name: Test CI Stata

on:
  workflow_dispatch:
    inputs:
      logLevel:
        description: 'Log level'
        required: false
      tags:
        description: 'Manual trigger'

jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v2
    
    - name: Stata Action
      id: ci-stata
      uses: ledwindra/continuous-integration-stata@v1.1
      with:
        url: ${{ secrets.URL }}
        old-file: ${{ secrets.OLD_FILE }}
        version: ${{ secrets.VERSION }}
        serial-number: ${{ secrets.SERIAL_NUMBER }}
        code: ${{ secrets.CODE }}
        authorization: ${{ secrets.AUTHORIZATION }}
        first-name: ${{ secrets.FIRST_NAME }}
        last-name: ${{ secrets.LAST_NAME }}
        repository-url: ${{ secrets.REPOSITORY_URL }}
        repository-dir: ${{ secrets.REPOSITORY_DIR }}
        
    # Runs a set of commands using the runners shell
    - name: Run a multi-line script
      run: |
        pwd
        ls -la
        cd ${GITHUB_WORKSPACE}
        pwd
        ls -la
        git status
